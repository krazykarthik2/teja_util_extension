"use strict";(self.webpackChunkaest_util=self.webpackChunkaest_util||[]).push([[921],{4921:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var r=t(5043),l=t(240),n=t(9884),i=t(579);const a=[[5,5]],d=20,c=()=>{const e=()=>[Math.floor(Math.random()*d),Math.floor(Math.random()*d)],[s,t]=(0,r.useState)(a),[l,n]=(0,r.useState)(e()),[c,o]=(0,r.useState)("RIGHT"),[u,h]=(0,r.useState)(200),[x,f]=(0,r.useState)(0),[y,m]=(0,r.useState)(!1),v=e=>{const s={ArrowUp:"UP",ArrowDown:"DOWN",ArrowLeft:"LEFT",ArrowRight:"RIGHT",w:"UP",s:"DOWN",a:"LEFT",d:"RIGHT",2:"DOWN",4:"LEFT",6:"RIGHT",8:"UP"};o((t=>s[e.key]&&!p(t,s[e.key])?s[e.key]:t))},p=(e,s)=>({UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"}[e]===s),j=()=>{const r=[...s],i=r[r.length-1];let a;switch(c){case"UP":a=[i[0]-1,i[1]];break;case"DOWN":a=[i[0]+1,i[1]];break;case"LEFT":a=[i[0],i[1]-1];break;case"RIGHT":a=[i[0],i[1]+1];break;default:return}a[0]<0||a[1]<0||a[0]>=d||a[1]>=d||s.some((e=>e[0]===a[0]&&e[1]===a[1]))?m(!0):(r.push(a),a[0]===l[0]&&a[1]===l[1]?(f((e=>e+1)),n(e()),h((e=>Math.max(50,e-10)))):r.shift(),t(r))};(0,r.useEffect)((()=>{if(y)return;const e=setInterval(j,u);return()=>clearInterval(e)}),[s,c,u,y]),(0,r.useEffect)((()=>(window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v))),[c]);return(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20px"},children:[(0,i.jsx)("h1",{children:"Snake Game"}),(0,i.jsxs)("h2",{children:["Score: ",x]}),y&&(0,i.jsx)("h3",{children:"Game Over! Refresh to restart."}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(20, 20px)",backgroundColor:"black"},children:(()=>{const e=[];for(let t=0;t<d;t++)for(let r=0;r<d;r++){const n=s.some((e=>e[0]===t&&e[1]===r)),a=l[0]===t&&l[1]===r;e.push((0,i.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:n?"green":a?"red":"black",border:"1px solid #333"}},`${t}-${r}`))}return e})()}),(0,i.jsx)("div",{className:"center gap-10",children:(0,i.jsxs)("button",{tabIndex:-1,onClick:()=>{t([[5,5]]),m(!1)},accessKey:"r",children:[(0,i.jsx)("u",{children:"R"}),"estart"]})})]})};var o=t(3537);const u={up:"down",down:"up",left:"right",right:"left"},h=(e,s)=>{let t=Array.from({length:e},(()=>Array.from({length:s},(()=>1))));const r=(l,n)=>{t[l][n]=0;const i=((t,r)=>{let l=[];const n=[[-2,0],[2,0],[0,-2],[0,2]];for(const[i,a]of n){const n=t+i,d=r+a;n>=0&&n<e&&d>=0&&d<s&&l.push([n,d])}return l})(l,n),a=i.sort((()=>Math.random()-.5));for(const[e,s]of a)1===t[e][s]&&(t[(l+e)/2][(n+s)/2]=0,r(e,s))};return r(1,1),t[0][1]=0,t[e-1][s-2]=0,t},x=(e,s)=>Array.from({length:e},(()=>Array.from({length:s},(()=>!1)))),f=[1,1.2,1.5,1.7],y=["very-bright","bright","normal","dark"],m=e=>{let{grid:s,illGrid:t,heroPos:r,prizePos:l}=e;return(0,i.jsx)("div",{className:"mini-map",children:s.map(((e,s)=>(0,i.jsx)("div",{className:"mini-row",children:e.map(((e,n)=>(0,i.jsx)("div",{className:`mini-cell ${t[s][n]?"illuminated":""} ${r.x===s&&r.y===n?"hero":""} ${(null===l||void 0===l?void 0:l.x)===s&&(null===l||void 0===l?void 0:l.y)===n?"prize":""}`},n)))},s)))})},v=()=>{const e=50,s=50,[t,l]=(0,r.useState)(h(e,s)),[n,a]=(0,r.useState)([]),[d,c]=(0,r.useState)({x:1,y:1}),[o,v]=(0,r.useState)({x:1,y:1}),[p,j]=(0,r.useState)(null),[w,g]=(0,r.useState)(x(e,s)),[k,b]=(0,r.useState)(!1),[N,E]=(0,r.useState)(!1),[S,A]=(0,r.useState)(null),[T,M]=(0,r.useState)(0),[I,G]=(0,r.useState)(!1);function L(e,s,t,r){const l=Math.abs(e-t)+Math.abs(s-r);return 1/f[T]**l}window.prizePos=p,(0,r.useEffect)((()=>{j((e=>{if(!e)return;let s={x:0,y:0};window.dft=(s,t)=>r(s,t,e),window.grid=e;let t=x(e.length,e[0].length);function r(e,s,l){return e<0||s<0||e>=l.length||s>=l[0].length||t[e][s]?[]:(t[e][s]=!0,0==l[e][s]?[[e,s],...r(e-1,s,l),...r(e+1,s,l),...r(e,s-1,l),...r(e,s+1,l)]:[])}const l=r(1,1,e);if(0==l.length)return null;const n=Math.floor(Math.random()*l.length);return console.log(l[n],n,l),s.x=l[n][0],s.y=l[n][1],s})(t))}),[t]),(0,r.useEffect)((()=>{g((e=>((e,s,t,r)=>{const l=e;for(let n=s.x-r;n<=s.x+r;n++)for(let l=s.y-r;l<=s.y+r;l++)n>=0&&n<t.length&&l>=0&&l<t[0].length&&(e[n][l]=!0);return l})(e,d,t,5)))}),[d,t]),(0,r.useEffect)((()=>{let e=Math.max(d.x-5,0),s=Math.max(d.y-5,0),r=Math.min(d.x+5,49),l=Math.min(d.y+5,49),n=t.slice(e,r+1);n=n.map((e=>e.slice(s,l+1)));for(let t=e;t<=r;t++)for(let r=s;r<=l;r++)n[t-e][r-s]=[n[t-e][r-s],t,r];a(n),v(d)}),[t,d,5]);const R=e=>{const s={...d};switch(e){case"up":if(!(s.x>0&&0===t[s.x-1][s.y]))return!1;s.x-=1;break;case"down":if(!(s.x<49&&0===t[s.x+1][s.y]))return!1;s.x+=1;break;case"left":if(!(s.y>0&&0===t[s.x][s.y-1]))return!1;s.y-=1;break;case"right":if(!(s.y<49&&0===t[s.x][s.y+1]))return!1;s.y+=1;break;default:return!1}return c(s),!0};(0,r.useEffect)((()=>{const e=e=>{switch(e.key){case"w":case"ArrowUp":case"8":R("up");break;case"s":case"ArrowDown":case"2":R("down");break;case"a":case"ArrowLeft":case"4":R("left");break;case"d":case"ArrowRight":case"6":R("right")}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[d]),(0,r.useEffect)((()=>{if(!N||k||!p)return;let r=[];const l=Array(e).fill(null).map((()=>Array(s).fill(!1))),n=[{dx:-1,dy:0,dir:"up"},{dx:1,dy:0,dir:"down"},{dx:0,dy:-1,dir:"left"},{dx:0,dy:1,dir:"right"}],i=function(a,d){var c;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(a<0||d<0||a>=e||d>=s||l[a][d]||1===t[a][d])return!1;l[a][d]=!0;const h=(null===(c=n.filter((r=>{let{dx:n,dy:i}=r;return a+n>=0&&d+i>=0&&a+n<e&&d+i<s&&!l[a+n][d+i]&&0===t[a+n][d+i]}))[0])||void 0===c?void 0:c.dir)||o;if(r.push({x:a,y:d,type:"explore",dir:h}),a===p.x&&d===p.y)return r.push({x:a,y:d,type:"prize",dir:h}),!0;for(const{dx:e,dy:s,dir:t}of n)if(i(a+e,d+s,t))return!0;return r.push({x:a,y:d,type:"backtrack",dir:u[o]}),!1};i(d.x,d.y),console.log("---\x3e",d.x,d.y),console.log(r);let a=0;const o=setInterval((()=>{if(a>=r.length)return void clearInterval(o);const{x:e,y:s,type:t,dir:l}=r[a];"explore"!==t&&"backtrack"!==t&&"prize"!==t||console.log("out-",c({x:e,y:s})),console.log("@step:",a),a++}),100);return()=>clearInterval(o)}),[N,p,t,k]),(0,r.useEffect)((()=>{d&&p&&d.x===p.x&&d.y===p.y&&b(!0)}),[d,p,t]);const C=()=>{l(h(e,s)),g(x(e,s)),c({x:1,y:1})};return(0,r.useEffect)((()=>{k&&C()}),[k]),(0,i.jsx)("div",{className:"game-container w-full h-full",children:(0,i.jsxs)("div",{className:"map-container w-full h-full",children:[k||(0,i.jsxs)("div",{className:"d-center w-full items-center !justify-between h-full px-10",children:[(0,i.jsx)("div",{className:"full-map",children:(0,i.jsx)(m,{grid:t,illGrid:w,heroPos:d,prizePos:p})}),(0,i.jsx)("div",{className:"current-map "+(I?"-blur":""),children:o&&n.map(((e,s)=>(0,i.jsx)("div",{className:"row",children:e.map(((e,s)=>{let[t,r,l]=e;return(0,i.jsxs)("div",{className:`cell ${0===t?"path":"wall"} ${(null===o||void 0===o?void 0:o.x)===r&&(null===o||void 0===o?void 0:o.y)===l?"hero":""} ${(null===p||void 0===p?void 0:p.x)===r&&(null===p||void 0===p?void 0:p.y)===l?"prize":""}`,style:{opacity:L(o.x,o.y,r,l),filter:I?`blur(${6*(1-L(o.x,o.y,r,l))}px)`:"none"},children:[(null===o||void 0===o?void 0:o.x)===r&&(null===o||void 0===o?void 0:o.y)===l?"*":"",(null===p||void 0===p?void 0:p.x)===r&&(null===p||void 0===p?void 0:p.y)===l?"\ud83d\udc8e":""]},s)}))},s)))}),(0,i.jsxs)("table",{className:"options m-0",align:"center",children:[(0,i.jsxs)("tr",{className:"auto",children:[(0,i.jsxs)("td",{children:["A",(0,i.jsx)("u",{children:"U"}),"TO:"]}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"px-2 py-1 rounded-full bg-gray-800",onClick:()=>E((e=>!e)),accessKey:"u",children:N?"on":"off"})})]}),(0,i.jsxs)("tr",{className:"darkness",children:[(0,i.jsxs)("td",{children:["Dar",(0,i.jsx)("u",{children:"k"}),"ness:"]}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"darkness d-center p-2 rounded-full bg-gray-800",accessKey:"k",onClick:()=>M((e=>(e+1)%f.length)),children:y[T]})})]}),(0,i.jsxs)("tr",{className:"-blur",children:[(0,i.jsxs)("td",{children:["Blu",(0,i.jsx)("u",{children:"r"})]}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{className:"px-2 py-1 rounded-full bg-gray-800",accessKey:"r",onClick:()=>G((e=>!e)),children:I?"on":"off"})})]}),(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:2,children:(0,i.jsxs)("button",{type:"button",accessKey:"n",onClick:C,children:[(0,i.jsx)("u",{children:"N"}),"ew Game"]})})})]})]}),k&&(0,i.jsxs)("div",{className:"d-center stack",children:[(0,i.jsx)("div",{className:"overview",children:t.map(((e,s)=>(0,i.jsx)("div",{className:"d-center stack",children:e.map(((e,t)=>(0,i.jsxs)("div",{className:`cell ${0===e?"path":"wall"} ${(null===p||void 0===p?void 0:p.x)===s&&(null===p||void 0===p?void 0:p.y)===t?"prize":""}`,children:[(null===d||void 0===d?void 0:d.x)===s&&(null===d||void 0===d?void 0:d.y)===t?"d":"",(null===p||void 0===p?void 0:p.x)===s&&(null===p||void 0===p?void 0:p.y)===t?"\ud83d\udc8e":""]},t)))},s)))}),(0,i.jsxs)("button",{type:"button",accessKey:"r",onClick:()=>{b(!1)},children:[(0,i.jsx)("u",{children:"R"}),"e-start"]})]})]})})},p=e=>{let{hours:s,minutes:t,props:r,dispatch:a}=e;const d=(0,o.g)();return(0,i.jsxs)("div",{className:"stack justify-between items-center h-screen py-10 px-5 gap-5",children:[(0,i.jsx)("div",{className:"top",children:"GAME"}),(0,i.jsxs)("div",{className:"middle h-full w-full",children:["snake"==(null===d||void 0===d?void 0:d.game)&&(0,i.jsx)(c,{}),"maze"==(null===d||void 0===d?void 0:d.game)&&(0,i.jsx)(v,{})]}),(0,i.jsxs)("div",{className:"bottom w-full justify-between stack items-center gap-2",children:[(0,i.jsx)(l.A,{...r,hidden:!0}),(0,i.jsxs)("div",{className:"flex justify-between items-center w-full h-full",children:[(0,i.jsx)("div",{className:"left"}),(0,i.jsx)("div",{className:"middle",children:(0,i.jsx)(n.en,{})}),(0,i.jsx)("div",{className:"right",children:(0,i.jsx)(n.Vm,{})})]}),(0,i.jsx)("div",{className:"bottom d-center",children:(0,i.jsx)(n.ay,{})})]})]})}}}]);
//# sourceMappingURL=921.71a55668.chunk.js.map